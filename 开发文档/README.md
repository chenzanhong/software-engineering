# 开发文档

## 前端

### 项目依赖
- Vue 2
- Element UI
- Vuex
- Axios
- Vue-router

### 开发内容

- [x] **登陆注册界面**
  - [x] 登陆和注册单页切换

- [ ] **文生图界面**
  - [x] 文生图功能提供多参数选择和上传（和后端对齐）
  - [ ] 参数预置功能
  - [ ] 提供跳转到个人信息界面、历史结果界面、退出到登录界面等按钮
  - [ ] 添加个人信息悬浮组件
  - [x] 图片展示（舍弃、导出、保存、收藏）

- [ ] **个人信息悬浮组件**
  - [ ] 开发一个动态组件，根据用户信息动态渲染，包括用户信息界面(具体的信息编辑)跳转,用户名、头像、退出登录按钮
  - [ ] 以头像悬浮的方式复用,hover状态下展开并持续显示一段时间

- [ ] **文生图历史记录界面**
  - [ ] 批量导出
  - [ ] 批量删除

- [ ] **个人详情界面**
  - [x] 编辑功能
  - [ ] 与后端对接

## 后端

### 项目依赖
- "github.com/dgrijalva/jwt-go"
- "github.com/gin-gonic/gin"
- "gorm.io/gorm"
- "golang.org/x/crypto/bcrypt"
- 目前的功能需要这些依赖，后续会增加

### 开发内容

1. **登陆注册接口**
   - 注册界面接收前端传来邮箱，进行数据库查询，判断用户是否存在，不存在则注册，存在则返回错误信息，并对密码进行加密，保存到数据库中
   - 登陆界面接收前端传来用户名和密码，进行数据库查询，判断用户是否存在，存在则比对密码，不存在则返回错误信息
   - jwt返回token用于登录验证

2. **文生图接口**
   - 部署本地的文生图模型，编写接口进行传参和调用
   - 接收前端的参数，调用本地部署的大模型，生成对应的图片，返回给前端，并将记录存入数据库

3. **个人信息界面**
   - 结合数据库的用户信息，使用查询函数查询出需要的信息返回给前端

4. **文生图历史记录**
   - 总的记录
   - 按照时间排序，可以列出一段时间内的查询信息
   - 按照参数排序，可以列出所需查询参数的查询信息
   - 按照结果排序，可以列出所需结果图片的查询信息
   - 按照用户排序，可以列出所需用户查询的查询信息
   - 待定   

5. **图片收藏界面**
   - 查询展示出用户的收藏图片

6. **数据库设计**
   - 用户登录表：id，email，user，password，token
   - 用户查询表：id，user（外键），params，result，time
   - 收藏表：id，user（外键），result


  